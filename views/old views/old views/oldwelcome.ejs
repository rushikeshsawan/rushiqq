<% if(session.user_id){ %>

  <!doctype html>
  <html lang="en">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

      .colorback{
        background: #26a69a !important ;
      
      
      }
          </style>
          <!-- Required meta tags -->
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1">
      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          <!-- Bootstrap CSS -->
      
          <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
       -->
          <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css"> -->
      

    <!-- Bootstrap CSS -->

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

    -->


    <title>Welcome <%= session.user_id %>
    </title>
  </head>

  <body>
    <%- include('nav.ejs') %>
        


    <!-- Cards start -->
    <div class="container">
      <h5>Welcome <%= session.addre %></h5>
      <div class="row">
    
        <div class="col s4">
          <div class="card ">
            
            <div class="card-content valign-wrapper">
              <p class=" center-align"><strong>Add New Product</strong></p>
              
              <div class="card right-align">
                <button type="button" data-target="modal1"
                    class=" text-center btn modal-trigger">Add New Product</button>
              </div>
            </div>
            
          </div>
        </div>
    
        <div class="col s4">
          <div id="product-details" class="card medium">
            
            <div class="card-content ">
              <h5 class=" center-align"><strong> Get Product Details.!</strong></h5><hr>
              <h5 class="card-title text-center"><strong>Product Id: <%= pid %></strong></h5>
              <form action="/productdetails" method="post" class="center-align">

                <input type="text" placeholder="Enter Produuct ID here." name="productid">
                <button type="submit" class="btn btn-dark center-align"> submit</button>
              </form>

              <div id="hidethis">

                <h6>
                  <spam class="text-dark">Name: </spam>
                  <%= pname %>
                </h6>
                <hr>
                <h6>
                  <spam class="text-dark">Mobile No:</spam>
                  <%= pmobile %>
                </h6>
                <hr>
                <h6>
                  <spam class="text-dark">Email:</spam>
                  <%= pemail %>
                </h6>
                <hr>
                <h6>
                  <spam class="text-dark">Manufacture date:</spam>
                  <%= pmau %>
                </h6>
                <hr>
                <h6>
                  <spam class="text-dark"> Warranty Start:</spam>
                  <%= pws %>
                </h6>
                <hr>
                <h6>
                  <spam class="text-dark">Warranty End:</spam>
                  <%= pwe %>
                </h6>

              </div>
            </div>
          </div>
        </div>
    
        <div class="col s4">
          <div class="card medium">
            <div class="card-image">
              <img src="http://placehold.it/640x240">
            </div>
            <div class="card-content">
              <p class="flow-text truncate scrolling">A super long .flow-text title in materialize framework card is significantly larger that what is shown even with .scrolling class applied. </p>
              <p>It's has both .truncate and .scrolling classes applied but is so long it's never fully revealed.</p>
            </div>
          </div>
        </div>	
      
    
      </div>
      
    </div>






    <div class="container"> 
      <div class="row center-align ">
        <h5>Welcome <%= session.addre %></h5>
        <br><br><br><br><br><br><br><br><br>
        <div class="col s12 m3 valign-wrapper ">
          <div class="card valign">
            <div class="card-image">
              <img src="https://placehold.it/320x240">
              
            </div>
            <div class="card-content center-align">
              <strong>Add New Product</strong> 
            </div>
            <div class="card-action center-align">
              <button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button>
            </div>
          </div>
        </div>
        <div class="col s6  valign-wrapper ">
          <div class="card valign">
            <div class="card-image">
              <img src="https://placehold.it/320x240">
              
            </div>
            <div class="card-content center-align">
              <strong>Add New Product</strong> 
            </div>
            <div class="card-action center-align">
              <button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button>
            </div>
          </div>
        </div>
        <div class="col s6  valign-wrapper ">
          <div class="card valign">
            <div class="card-image">
              <img src="https://placehold.it/320x240">
              
            </div>
            <div class="card-content center-align">
              <strong>Add New Product</strong> 
            </div>
            <div class="card-action center-align">
              <button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button>
            </div>
          </div>
        </div>
        <div class="col s12 m3 valign-wrapper ">
          <div class="card valign">
            <div class="card-image">
              <img src="https://placehold.it/320x240">
              
            </div>
            <div class="card-content center-align">
              <strong>Add New Product</strong> 
            </div>
            <div class="card-action center-align">
              <button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button>
            </div>
          </div>
        </div>
        <div class="col s12 m3 valign-wrapper ">
          <div class="card valign">
            <div class="card-image">
              <img src="https://placehold.it/320x240">
              
            </div>
            <div class="card-content center-align">
              <strong>Add New Product</strong> 
            </div>
            <div class="card-action center-align">
              <button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button>
            </div>
          </div>
        </div>
        
        <div class="col s12 m5 valign-wrapper">
          <div class="card valign">
            <!-- <div class="card-image">
              <img src="https://placehold.it/320x240">
              <span class="card-badge orange"><i class="material-icons">fiber_new</i> improved</span>
              <span class="card-title">Card Title</span>
            </div> -->
            <div class="card-content">
              <p>I am a very simple card. I am good at containing small bits of information.
              I am convenient because I require little markup to use effectively.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        
        <div class="col s12 m5 valign-wrapper">
          <div class="card valign">
            <!-- <div class="card-image">
              <img src="https://placehold.it/320x240">
              <span class="card-badge green"><i class="material-icons">school</i>Certified</span>
              <span class="card-title">Card Title</span>
            </div> -->
            <div class="card-content">
              <p>I am a very simple card. I am good at containing small bits of information.
              I am convenient because I require little markup to use effectively.</p>
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
            </div>
          </div>
        </div>
        
      </div>
    </div>

    <div class="container mt-5">

      <div class="row row-cols-1 row-cols-md-2 g-4">
        <div class="col">
          <div class="card text-dark bg-light mb-3" style="max-width: 18rem;">
            <div class="card-header text-center">Add New Product
            </div>
            <div class="card-body text-center">
              <h1 class="card-title text-center"><button type="button" data-target="modal1"
                  class="btn btn-dark text-center btn modal-trigger">Add New Product</button></h1>

            </div>
          </div>
        </div>
        <div class="col">

          <div class="card text-dark bg-light mb-3" style="max-width: 18rem;">
            <div class="card-header text-center">Get Product Details
            </div>
            <div class="card-body">
              <h5 class="card-title text-center"><strong>Product Id: <%= pid %></strong></h5>
              <form action="/productdetails" method="post" class="text-center">

                <input type="text" placeholder="Enter Produuct ID here." name="productid">
                <button type="submit" class="btn btn-dark text-center"> submit</button>
              </form>
             
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card text-dark bg-light mb-3" style="max-width: 18rem;">
            <div class="card-header text-center">Total Product Sold
            </div>
            <div class="card-body">
              <h1 class="card-title text-center"><strong>
                  <%= sold %>
                </strong></h1>
              <p class="card-text"></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card text-dark bg-light mb-3" style="max-width: 18rem;">
            <div class="card-header text-center">Total Product Unsold
            </div>
            <div class="card-body">
              <h1 class="card-title text-center"><strong>
                  <%= unsold %>
                </strong></h1>
              <p class="card-text"> </p>
            </div>
          </div>
        </div>


      </div>

      <!-- Cards End -->


      <!-- modal start  -->
      <%- include('modal.ejs') %>
        <!-- modal End  -->


        <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js">
              </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js">
              </script>  -->
    
    


<!-- 
          <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
          <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js">
          </script>
       <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

          <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js">
          </script>
    -->
      


          <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
        <script>
          
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.sidenav');
    var instances = M.Sidenav.init(elems, options);
  });

  // Or with jQuery

  $(document).ready(function(){
    $('.sidenav').sidenav();
  });
          // add new product
          $("#idForm").submit(function (e) {

            e.preventDefault(); // avoid to execute the actual submit of the form.

            var form = $(this);
            var actionUrl = form.attr('action');

            $.ajax({
              type: "POST",
              url: actionUrl,
              data: form.serialize(), // serializes the form's elements.
              success: function (data) {
                $('#idForm').trigger("reset");
                console.log(data);
                if((data[0])==true){
                  // Materialize.toast('Record Inserted Successfully!', 5000);  
                  swal("Good job!", "Record Inserted Successfully!", "success");
                  // M.toast({html: 'Record Inserted Successfully!'});
                }else{
                  swal("Sorry!", "Product Already Exist", "error");
                  // Materialize.toast('Record Insertion Failed!', 5000);  
                };
                
                // alert(data); // show response from the php script.
              }
            });

          });
          // add new product




          $(document).ready(function () {
            $('.modal').modal();
          }
          )



          const params = window.location.href;
          let hidden = document.getElementById('hidethis');
          hidden.style.display = 'none';
          if (params.search('productdetails') > 0) {

            hidden.style.display = 'block';

          }
          console.log(params.search('productdetails'));


        </script>
  </body>

  </html>


  <% }else{ %>
    <script> document.location.href = '/' </script>
    <% } %>